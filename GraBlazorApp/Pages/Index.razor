@page "/" 

    <style>
    .container {
        width: 400px;
    }
    button{
        width: 100px;
        height: 100px;
        font-size: 50px;
    }
</style>
<div class="container">
    <div class="row">
        @foreach (var animal in shuffledAnimals)
    {
        <div class="col-3">
            <button @onclick="@(() => ButtonClick(animal))" 
            type="button" class="btm-outline-dark">
                <h1>@animal</h1>
            </button>
            
        </div>
    }
    </div>
</div>


@code
{
    //lista elementow gry
    List <string> animalEmoji = new List<string>()
        {
            "🐶","🐶",
            "🐨","🐨", 
            "🐼","🐼", 
            "🐱","🐱", 
            "🐷","🐷", 
            "🐰","🐰", 
            "🦊","🦊", 
            "🦇","🦇", 
        };

        //losowanie obiektow w liscie shuffledAnimals
    List <string> shuffledAnimals = new List<string>();
        protected override void OnInitialized() //kiedy zaladujesz strone
        {
            SetUpGame();
        }
        private void SetUpGame()
        {
            Random random =new Random();
            shuffledAnimals = animalEmoji
            .OrderBy(item => random.Next())
            .ToList();
        }
        
        string lastAnimalFound = string.Empty;
        private void ButtonClick(string animal)
        {
            if (lastAnimalFound == string.Empty) //jesli lastanimal jest pusty to dodaje  do niego
            {                                    //wartosci z pierwszego kliknięcia            
                lastAnimalFound=animal;
            }
            else if(lastAnimalFound == animal) //jesli po drugim klikniecu mamy pare
            {                                  //usuwamy obiekty z gry
                lastAnimalFound = string.Empty;
                shuffledAnimals = shuffledAnimals
                .Select(a => a.Replace(animal, string.Empty))
                .ToList(); 
            }
            else
            {
                //jesli nie ma pary resetuje zmienna lastAnimalFound
                lastAnimalFound = string.Empty;
            }
        }

}